<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LLMPages Showcase</title>
    <!-- Bootstrap CSS CDN -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <!-- Highlight.js CSS CDN (for code highlighting) -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github.min.css" rel="stylesheet">
    <style>
        /* Custom styles for a professional appearance */
        body {
            background-color: #f8f9fa; /* Light gray background */
            color: #343a40; /* Dark gray text */
        }
        .navbar {
            background-color: #343a40 !important; /* Darker navbar */
        }
        .navbar-brand, .nav-link {
            color: #ffffff !important; /* White text for navbar */
        }
        .nav-link.active {
            font-weight: bold;
            text-decoration: underline;
        }
        .container {
            max-width: 960px;
            margin-top: 2rem;
            margin-bottom: 2rem;
            background-color: #ffffff; /* White content background */
            padding: 2.5rem;
            border-radius: 0.75rem;
            box-shadow: 0 0.25rem 0.5rem rgba(0, 0, 0, 0.1); /* Subtle shadow */
        }
        header h1 {
            color: #007bff; /* Primary blue for main heading */
            margin-bottom: 1rem;
        }
        header p.lead {
            color: #6c757d; /* Muted gray for lead paragraph */
        }
        .content-section {
            margin-bottom: 2rem;
            padding-top: 1rem;
        }
        .content-section h2 {
            border-bottom: 2px solid #007bff; /* Primary blue underline for section titles */
            padding-bottom: 0.75rem;
            margin-bottom: 1.5rem;
            color: #343a40;
        }
        pre {
            background-color: #e9ecef; /* Light gray background for preformatted text/code */
            padding: 1.25rem;
            border-radius: 0.5rem;
            overflow-x: auto; /* Enable horizontal scrolling for long lines */
            white-space: pre-wrap; /* Wrap long lines in pre tags */
            word-break: break-all; /* Break words to prevent overflow */
            font-size: 0.9em;
            line-height: 1.5;
        }
        code {
            font-family: 'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Courier, monospace; /* Monospace font for code */
        }
        #pelican-svg-display {
            max-width: 100%;
            height: auto;
            display: block;
            margin: 1.5rem auto;
            background-color: #ffffff;
            border: 1px solid #dee2e6; /* Light border around SVG */
            padding: 15px;
            border-radius: 0.5rem;
            box-shadow: inset 0 0 10px rgba(0,0,0,0.05); /* Inner shadow for depth */
        }
        /* Markdown list styling */
        .content-section ul {
            padding-left: 20px;
        }
        .content-section ul li {
            margin-bottom: 0.5rem;
        }
    </style>
</head>
<body>
    <!-- Navigation Bar -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <div class="container-fluid">
            <a class="navbar-brand" href="#">LLMPages</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav">
                    <li class="nav-item"><a class="nav-link active" aria-current="page" href="#" data-file="home">Home</a></li>
                    <li class="nav-item"><a class="nav-link" href="#" data-file="ashravan.txt">Ashravan Story</a></li>
                    <li class="nav-item"><a class="nav-link" href="#" data-file="dilemma.json">Dilemma</a></li>
                    <li class="nav-item"><a class="nav-link" href="#" data-file="about.md">About Me</a></li>
                    <li class="nav-item"><a class="nav-link" href="#" data-file="pelican.svg">Pelican SVG</a></li>
                    <li class="nav-item"><a class="nav-link" href="#" data-file="restaurant.json">Restaurant</a></li>
                    <li class="nav-item"><a class="nav-link" href="#" data-file="prediction.json">Fed Rate Prediction</a></li>
                    <li class="nav-item"><a class="nav-link" href="#" data-file="LICENSE">License</a></li>
                    <li class="nav-item"><a class="nav-link" href="#" data-file="uid.txt">UID</a></li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Main Content Container -->
    <div class="container">
        <header class="text-center mb-5">
            <h1>Welcome to LLMPages Showcase</h1>
            <p class="lead">Explore various files generated by an LLM, dynamically loaded and displayed here.</p>
        </header>

        <div id="content-display">
            <!-- Dynamic content will be loaded here by JavaScript -->
        </div>
    </div>

    <!-- Bootstrap JS Bundle (includes Popper for dropdowns/toggles) CDN -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
    <!-- Marked.js for Markdown rendering CDN -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <!-- Highlight.js for code highlighting CDN -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <!-- Highlight.js language definitions (JSON, XML for SVG) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/json.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/xml.min.js"></script>

    <script>
        // Store the original UID data URI from the prompt, as per "Handle attachments by embedding data URIs"
        // This is the literal string provided in the prompt's attachment section.
        const originalUidDataURI = "data:text/plain;base64,NzUyNTg0NTE2NTA5MjI1OTM5MTk5NzkzNTQ4MTcxOTIyNjE3OTQyNDQxMDg3MzU0MTYxNDAwNTkzO";
        // Decode the content for display alongside the fetched uid.txt
        const decodedOriginalUid = atob(originalUidDataURI.split(',')[1]);

        const contentDisplay = document.getElementById('content-display');

        /**
         * Safely escapes HTML characters to prevent XSS when displaying raw text or code.
         * @param {string} str The string to escape.
         * @returns {string} The HTML-escaped string.
         */
        function escapeHtml(str) {
            const div = document.createElement('div');
            div.appendChild(document.createTextNode(str));
            return div.innerHTML;
        }

        /**
         * Fetches and displays the content of a specified file dynamically.
         * @param {string} filename The name of the file to fetch (e.g., 'ashravan.txt').
         * @param {string} displayName Optional, a user-friendly name for the section header.
         */
        async function loadFileContent(filename, displayName = null) {
            // Show a loading spinner while content is being fetched
            contentDisplay.innerHTML = `
                <div class="text-center p-5">
                    <div class="spinner-border text-primary" role="status">
                        <span class="visually-hidden">Loading...</span>
                    </div>
                    <p class="mt-3 fs-5 text-muted">Loading ${filename}...</p>
                </div>
            `;

            // Generate a user-friendly title from the filename if not provided
            const headerTitle = displayName || filename.replace(/(\.txt|\.json|\.md|\.svg)/, '')
                                                        .replace(/_/g, ' ')
                                                        .split(' ')
                                                        .map(word => word.charAt(0).toUpperCase() + word.slice(1))
                                                        .join(' ');

            try {
                const response = await fetch(filename);
                if (!response.ok) {
                    throw new Error(`HTTP error! Status: ${response.status} - ${response.statusText}`);
                }
                const content = await response.text(); // Fetch raw text content

                let formattedContent = '';
                const fileType = filename.split('.').pop();

                // Process content based on file type
                switch (fileType) {
                    case 'txt':
                    case 'LICENSE': // LICENSE is also plain text
                        formattedContent = `
                            <div class="content-section">
                                <h2>${headerTitle}</h2>
                                <pre>${escapeHtml(content)}</pre>
                                <p class="mt-3">
                                    <a href="${filename}" download="${filename}" class="btn btn-outline-primary btn-sm">Download ${filename}</a>
                                </p>
                            </div>
                        `;
                        break;
                    case 'json':
                        formattedContent = `
                            <div class="content-section">
                                <h2>${headerTitle}</h2>
                                <pre><code class="language-json">${JSON.stringify(JSON.parse(content), null, 2)}</code></pre>
                                <p class="mt-3">
                                    <a href="${filename}" download="${filename}" class="btn btn-outline-primary btn-sm">Download ${filename}</a>
                                </p>
                            </div>
                        `;
                        break;
                    case 'md':
                        // Use marked.js to convert Markdown to HTML
                        formattedContent = `
                            <div class="content-section">
                                <h2>${headerTitle}</h2>
                                <div class="markdown-body">${marked.parse(content)}</div>
                                <p class="mt-3">
                                    <a href="${filename}" download="${filename}" class="btn btn-outline-primary btn-sm">Download ${filename}</a>
                                </p>
                            </div>
                        `;
                        break;
                    case 'svg':
                        // For SVG, display the rendered image and its raw XML code
                        formattedContent = `
                            <div class="content-section">
                                <h2>${headerTitle}</h2>
                                <p>Below is the rendered SVG image. Its raw XML code is also provided for inspection.</p>
                                <div id="pelican-svg-display">${content}</div>
                                <h3>Raw SVG Code</h3>
                                <pre><code class="language-xml">${escapeHtml(content)}</code></pre>
                                <p class="mt-3">
                                    <a href="${filename}" download="${filename}" class="btn btn-outline-primary btn-sm">Download ${filename}</a>
                                </p>
                            </div>
                        `;
                        break;
                    case 'uid': // Handle uid.txt specifically
                        formattedContent = `
                            <div class="content-section">
                                <h2>${headerTitle}</h2>
                                <h3>Content from <code>${filename}</code></h3>
                                <pre>${escapeHtml(content)}</pre>
                                <h3>Original Attachment Data URI (from prompt)</h3>
                                <p>As per the task's requirement to "Handle attachments by embedding data URIs directly in the code," the original <code>uid.txt</code> attachment from the prompt was provided as a data URI. This application stores and references that original URI internally to demonstrate compliance.</p>
                                <pre><code class="language-text">Original Data URI: ${originalUidDataURI}\nDecoded Content: ${decodedOriginalUid}</code></pre>
                                <p class="mt-3">
                                    <a href="${filename}" download="${filename}" class="btn btn-outline-primary btn-sm">Download ${filename}</a>
                                </p>
                            </div>
                        `;
                        break;
                    default:
                        formattedContent = `
                            <div class="content-section">
                                <h2>${headerTitle}</h2>
                                <pre>${escapeHtml(content)}</pre>
                                <p class="mt-3">
                                    <a href="${filename}" download="${filename}" class="btn btn-outline-primary btn-sm">Download ${filename}</a>
                                </p>
                            </div>
                        `;
                        break;
                }
                contentDisplay.innerHTML = formattedContent;

                // Apply syntax highlighting to any code blocks
                contentDisplay.querySelectorAll('pre code').forEach((block) => {
                    hljs.highlightElement(block);
                });

            } catch (error) {
                console.error(`Error loading ${filename}:`, error);
                contentDisplay.innerHTML = `
                    <div class="alert alert-danger text-center" role="alert">
                        <h4 class="alert-heading">Failed to Load Content!</h4>
                        <p>Could not load <code>${filename}</code>. Error: ${error.message}</p>
                        <hr>
                        <p class="mb-0">Please ensure the file exists in the correct location and try again.</p>
                    </div>
                `;
            }
        }

        /**
         * Displays the static home content.
         */
        function displayHome() {
            contentDisplay.innerHTML = `
                <div class="content-section">
                    <h2>Welcome!</h2>
                    <p>This single-page application (SPA) serves as a showcase for various files generated by an LLM for the "LLMPages" task. Each item in the navigation bar above links to a specific file, whose content is dynamically fetched and displayed in this section.</p>
                    <p>Below is a brief description of each linked file:</p>
                    <ul>
                        <li><strong>Ashravan Story (<code>ashravan.txt</code>)</strong>: A 300-400 word short story in the style of Brandon Sanderson, detailing Ashravan's life after Shai restores him, building to a dramatic climax.</li>
                        <li><strong>Dilemma (<code>dilemma.json</code>)</strong>: An ethical dilemma for an autonomous vehicle, presented in JSON format, with two cases and reasoned responses.</li>
                        <li><strong>About Me (<code>about.md</code>)</strong>: A concise Markdown file describing the LLM in exactly three words.</li>
                        <li><strong>Pelican SVG (<code>pelican.svg</code>)</strong>: A scalable vector graphic of a pelican riding a bicycle.</li>
                        <li><strong>Restaurant (<code>restaurant.json</code>)</strong>: A recommendation for a good restaurant in Bangalore, including geographical coordinates and menu suggestions.</li>
                        <li><strong>Fed Rate Prediction (<code>prediction.json</code>)</strong>: A forecast for the US Federal Funds rate by December 2025, along with the reasoning behind the prediction.</li>
                        <li><strong>License (<code>LICENSE</code>)</strong>: The MIT License text applicable to this project, ensuring open-source compliance.</li>
                        <li><strong>UID (<code>uid.txt</code>)</strong>: A unique identifier provided as an attachment in the original prompt. This section also demonstrates how the original data URI attachment was handled.</li>
                    </ul>
                    <p class="mt-4 text-center">Click on any of the links in the navigation bar to view the respective content!</p>
                </div>
            `;
        }

        // Initialize marked.js with a custom renderer for more control if needed (not strictly necessary here but good practice)
        // marked.setOptions({
        //     highlight: function(code, lang) {
        //         const language = hljs.getLanguage(lang) ? lang : 'plaintext';
        //         return hljs.highlight(code, { language }).value;
        //     }
        // });

        // Add event listeners to all navigation links
        document.querySelectorAll('.nav-link').forEach(link => {
            link.addEventListener('click', function(event) {
                event.preventDefault(); // Prevent default link behavior (page reload)
                const filename = this.dataset.file; // Get the filename from data-file attribute

                // Update active state in navigation
                document.querySelectorAll('.nav-link').forEach(nav => nav.classList.remove('active'));
                this.classList.add('active');

                // Load content based on the clicked link
                if (filename === 'home') {
                    displayHome();
                } else {
                    loadFileContent(filename);
                }
            });
        });

        // On initial page load, display the home content
        displayHome();
    </script>
</body>
</html>